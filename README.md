# Daesamanlap

# 0718
## 은영이파일 *0718_갱신.ipynb*
### 1. 변수목록
- 상가비율
- 세대당가능주차면수
- 공가수비율
- 대형전용면적 더미

- 자격유형 카테고리 {'1': 'A' ,'2':['C','F','G'],'3':['B','H','I'],'4':['J'], '5':['L',"M","N","O"],'6':["E","K"],'7':'D'}
- 공급유형별로 전용면적별세대수 sum 넣기 
- 임대료/임대보증금 평균 (상가빼고 평균 넣었을 때 mae 1이 안좋아진다)
- 연면적 (연면적 빼고 하면 mae 가 0.2 올라간다)

- 그 외 변수: 위도, 경도, subway_dist, 환승역 수, 총인구수, 세대당_인구, 남/여비율, 남/여_0~19세, 남/여_20~39세, 남/여_40~69세, 남/여_70세이상, 0~19세_비율, 20~39세_비율, 40~69세_비율, 70세이상_비율, 
         


### 2. 모형 나눈 기준: 단지내주차면수 785 기준으로 나누어 catboost
### 3. split test mae: catboost (96, 288)


### * 우리가 해볼 수 있는 것
- 모형 나누는 기준을 바꿔보자: 세대당가능주차면수, 세대당 인구 
- 전용면적, 전용면적별세대수 
- subway distance 바꾸기
- 총세대수/법정동세대수 후보 ... 
- 


## 유림이 세대당_인구 로 데이터 나누기 
- 세대당 인구로 분포가 날려서 2.4 기준으로 나누니까 2.4보다 낮은 그룹에서 너무 낮게 예측한다. 
- 

* 새로운 변수 찾거나,, 세대당주차면수 나누면 큰쪽이 문제였다.. 찾다... 


# 0719 stepwise
* 새로 해볼 것들
1. 자격유형 빼기 -> 제출 99.5240638276 
2. **1.** 상태에서 지역 빼고 유민이의 지역 카테고리로 넣기 <br>
-> group1 = ['대구광역시','세종특별자치시','경기도','서울특별시','충청북도','전라남도','전라북도','경상북도'] <br>
-> group2 = ['대전광역시','울산광역시','광주광역시','경상남도','제주특별자치도','부산광역시','충청남도','강원도'] <br>
-> 제출 104.0779652356 (5 올라감)

3. 세대당주차면수(0.83) 기준으로 나누기 -> 110.0922388926(11 올라감)
4. 임대료, 임대보증금 std 넣어서 -> 102 (3 올라감)
5. 장기전세만 빼기 -> 102.61 (3 올라감)
6. 공급유형에 임대료/임대보증금 비율들의 평균 넣기 -> 105.4136514162 (6올라감)
7. 전용면적 평균 넣기 -> 102.3697214742 (3 올라감)


### ^^* 오늘 정리 
- **단지내주차면수-총세대수** 뺀 변수 넣어보기 (EDA해보고)
- 두 그룹의 변수 다르게 하기 <br>
         - 주차면수 낮은 그룹에서 변수를 좀더 빼보자 
- drop해볼 변수: 남/여 비율, 환승역 수
- subway_dist와 환승역 수 보정 (역수해서 작은애들 0)
- 지하상가만 빼기 
- 전용면적 std 넣기 (지하상가 유무)
- 대형전용면적 sum 이 아닌 dummy로
- data.단지내주차면수<876 로 데이터 땡기기 


# 0720
1. data.단지내주차면수 < **987** 땡겼을 때 -> 제출: 98.00418
- 784 기준: (95* 310+ 221* 104)/414 = 126.652
- 876 기준: (97* 330 + 275* 84)/414 = 133.1159
- 987 기준: (105.9928 * 362 + 295.5874 * 52 ) /414 = 129.8066

2. *단지내주차면수-총세대수* (made by 유민 called 잉여주차)
-> 일단 1에 제출(98.00418)한 결과랑 비교했을 때 mae 차이가 2.75여서 제출은 아직 안함.
-> 제출: 99.6223515733

3. `subway_dist` 역수하고 median 아래는 0으로 변환 -> 제출: 99.9145979646 (최고기록은 1.9가 늘어난다)
4. `대형전용면적` 빼기 -> 제출 98.088 (0.88 올라감)


2. *단지내주차면수-총세대수* (made by 유민 called 잉여주차)
-> 일단 1에 제출(98.00418)한 결과랑 비교했을 때 mae 차이가 2.75여서 제출은 아직 안함.
-> 제출: 99.6223515733	

3. `subway_dist` 역수하고 median 아래는 0으로 변환 -> 제출: 99.9145979646 (최고기록은 1.9가 늘어난다)
4. `대형전용면적` 빼기 -> 제출 98.088 (0.88 올라감)
5. 단지내주차면수가 작은 그룹은 그대로 두고, 단지내주차면수가 큰 그룹은 오답노트를 해서 지역을 그룹해서 indicator 변수를 추가 -> 제출: **96.55993**
- ['제주특별자치도','경상남도','부산광역시']: 0
- ['광주광역시','세종특별자치시','경상북도','전라북도','서울특별시']: 1
- ['대구광역시']: 2
- else: 3

7. 그래서 유림이 지역 그룹한 것을 inidicator 변수 추가 -> 제출: 107.3153941027
8. 유림이 한 것에 `전용면적std` 넣어서 -> 제출: 103.3526 (7 올랐음)
9. `전용면적std`와 `전용면적mean` 넣어서 -> 제출: 103.1982 (그게그거)


## ^^ 오늘 정리 
1. 전체에서 건드릴 이야기: 
- 변수 빼기: 환승역수, 
- 대형전용면적을 더미로
- 전용면적별세대수 
- `subway_dist`에서 `지하철역`이 0인 값들을 NA 처리하기 
- `환승역수`에서 `지하철역`이 0인 값들을 NA 처리하기 (위랑 같이 고려 가능)

2. 단지내주차면수 작은 그룹
- 

3. 단지내주차면수 큰 그룹
- 

# 0721
1. 은영이 0718_갱신의 column 순서를 동일하게 맞춰줌 & 단지내주차면수 작은 그룹에 세종특별자치시 0으로 넣어서 추가 -> 제출 X <br>
단지내주차면수 작은 그룹은 거의 완벽하게 복원 but, 큰 그룹은 여전히 높음 <br>
MAE96과 비교했을 때 <br>
- 전체 MAE :  6.61642628119846
- 큰 영역 MAE :  51.19024543874576
- 작은 영역 MAE :  3.064215547965432e-14

2. 

## ^^ 오늘 정리 


# 0722
**BASE파일(96.55993)**기준으로 수정하자
1. `지하철수`가 0인 환승역수를 다 0으로 하기 -> 제출 100.15907 (4 올라감)
2. train_up에 자격유형 추가하기 ->
3. lasso와 catboost prediction 값 비교하기 ->


# 0723
1. train_up에 `총인구수` 변수 빼기 -> 
